RewriteEngine On

# -------------------------------------------------
# 1. FORCE HTTPS + NON-WWW (SEO CANONICAL)
# -------------------------------------------------
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^www\.globaltouristcentre\.com$ [NC]
RewriteRule ^(.*)$ https://globaltouristcentre.com/$1 [L,R=301]

# -------------------------------------------------
# 2. REMOVE index.html / index FROM URLS
# -------------------------------------------------
RewriteCond %{THE_REQUEST} \s/+(.*/)?index(\.html)?\s [NC]
RewriteRule ^ %1 [R=301,L]

# -------------------------------------------------
# 3. FIX OLD DOUBLE PATH ISSUES (LEGACY BUGS)
# -------------------------------------------------
RewriteRule ^itinerary/itinerary/(.*)$ /itinerary/$1 [R=301,L]

# -------------------------------------------------
# 4. REDIRECT OLD HTML URLS â†’ CLEAN URLS
# (Keeps Google rankings from old site)
# -------------------------------------------------
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.+)$ $1.html [L]

# -------------------------------------------------
# 5. HANDLE NEXT.JS STATIC ROUTING
# (Serve folder/index.html automatically)
# -------------------------------------------------
DirectoryIndex index.html

# -------------------------------------------------
# 6. PROPER 404 HANDLING (IMPORTANT)
# -------------------------------------------------
ErrorDocument 404 /404.html
